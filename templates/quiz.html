<body>
    <h1>Interactive Quiz</h1>
    <div id="quiz-container"></div>
    <button id="submit-quiz" style="display: none;">Submit Quiz</button>
    <div id="results" style="display: none;"></div>

    <script>
        const quizData = JSON.parse(localStorage.getItem('quizData'));
        let currentQuestion = 0;
        let score = 0;
        const userAnswers = [];

        function loadQuestion() {
            const quizContainer = document.getElementById('quiz-container');
            quizContainer.innerHTML = '';
            const questionData = quizData[currentQuestion];
            
            const questionElement = document.createElement('h3');
            questionElement.textContent = `${currentQuestion + 1}. ${questionData.question}`;
            quizContainer.appendChild(questionElement);

            questionData.choices.forEach((choice, index) => {
                const choiceElement = document.createElement('div');
                choiceElement.innerHTML = `
                    <input type="radio" name="answer" id="choice-${index}" value="${choice}">
                    <label for="choice-${index}">${choice}</label>
                `;
                quizContainer.appendChild(choiceElement);
            });

            const nextButton = document.createElement('button');
            nextButton.textContent = currentQuestion < quizData.length - 1 ? 'Next' : 'Finish';
            nextButton.addEventListener('click', handleNext);
            quizContainer.appendChild(nextButton);
        }

        function handleNext() {
            const selectedAnswer = document.querySelector('input[name="answer"]:checked');
            if (!selectedAnswer) {
                alert('Please select an answer!');
                return;
            }

            userAnswers.push(selectedAnswer.value);
            if (selectedAnswer.value === quizData[currentQuestion].correct) {
                score++;
            }

            if (currentQuestion < quizData.length - 1) {
                currentQuestion++;
                loadQuestion();
            } else {
                displayResults();
            }
        }

        function displayResults() {
            const quizContainer = document.getElementById('quiz-container');
            quizContainer.style.display = 'none';
            const results = document.getElementById('results');
            results.style.display = 'block';
            results.innerHTML = `
                <h2>Your Score: ${score}/${quizData.length}</h2>
                <h3>Review:</h3>
                ${quizData.map((q, i) => `
                    <p>
                        ${i + 1}. ${q.question}<br>
                        Your Answer: ${userAnswers[i]}<br>
                        Correct Answer: ${q.correct}
                    </p>
                `).join('')}
            `;
        }

        loadQuestion();
    </script>
</body>
